Version 4.1
SHEET 1 2284 2116
WIRE -880 512 -992 512
WIRE -992 544 -992 512
WIRE -880 544 -880 512
WIRE -992 656 -992 624
WIRE -880 656 -880 624
WIRE -880 704 -992 704
WIRE -400 704 -448 704
WIRE -144 704 -400 704
WIRE -32 704 -64 704
WIRE 432 704 336 704
WIRE 672 704 512 704
WIRE 672 720 672 704
WIRE -992 736 -992 704
WIRE -880 736 -880 704
WIRE -32 752 -32 704
WIRE 336 752 336 704
WIRE -448 768 -448 704
WIRE -992 848 -992 816
WIRE -880 848 -880 816
WIRE 672 848 672 800
WIRE -448 880 -448 848
WIRE -32 880 -32 832
WIRE 336 880 336 832
WIRE 672 976 672 928
WIRE 672 1072 672 1040
WIRE 672 1248 624 1248
WIRE 720 1248 672 1248
WIRE 944 1248 896 1248
WIRE 992 1248 944 1248
WIRE 1248 1248 1200 1248
WIRE 1296 1248 1248 1248
WIRE 624 1296 624 1248
WIRE 720 1296 720 1248
WIRE 896 1296 896 1248
WIRE 992 1296 992 1248
WIRE 1200 1296 1200 1248
WIRE 1296 1296 1296 1248
WIRE 624 1392 624 1376
WIRE 720 1392 720 1376
WIRE 896 1392 896 1376
WIRE 992 1392 992 1376
WIRE 1200 1392 1200 1376
WIRE 1296 1392 1296 1376
WIRE -336 1728 -416 1728
WIRE -208 1728 -336 1728
WIRE -80 1728 -128 1728
WIRE 48 1728 0 1728
WIRE 320 1728 224 1728
WIRE 560 1728 400 1728
WIRE 560 1744 560 1728
WIRE 48 1776 48 1728
WIRE 224 1776 224 1728
WIRE -416 1792 -416 1728
WIRE 560 1872 560 1824
WIRE -416 1904 -416 1872
WIRE 48 1904 48 1856
WIRE 224 1904 224 1856
WIRE 560 2000 560 1952
WIRE 560 2096 560 2064
FLAG -992 656 0
FLAG -880 656 0
FLAG 336 880 0
FLAG -448 880 0
FLAG -400 704 vin_tran
FLAG 672 1072 0
FLAG -32 880 0
FLAG 720 1392 0
FLAG 672 1248 mu_r
FLAG 992 1392 0
FLAG 944 1248 I_sat_sec
FLAG 1296 1392 0
FLAG 1248 1248 I_sat_pri
FLAG -880 848 0
FLAG -992 848 0
FLAG 624 1392 0
FLAG 896 1392 0
FLAG 1200 1392 0
FLAG 224 1904 0
FLAG 560 2096 0
FLAG 48 1904 0
FLAG -416 1904 0
FLAG -336 1728 z_pri
SYMBOL bi -992 624 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B1
SYMATTR Value I=I(L6)*Np/Ns + I(L7)/Ns
SYMBOL voltage -880 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_I_mag_sec
SYMATTR Value 0
SYMBOL ind -48 736 R0
SYMATTR InstName L6
SYMATTR Value {Np*Np*Al}
SYMBOL ind 320 736 R0
SYMATTR InstName L7
SYMATTR Value {Ns*Ns*Al}
SYMBOL res -160 720 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 2m
SYMBOL voltage -448 752 R0
WINDOW 123 -460 217 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -460 189 Left 2
SYMATTR Value2 AC 1
SYMATTR Value PULSE({-Vin} {Vin} {1/(2*Fsw)} 100n 100n {1/(2*Fsw)} {1/Fsw})
SYMATTR InstName V3
SYMBOL res 656 832 R0
SYMATTR InstName Rl
SYMATTR Value {Rl}
SYMBOL ind 416 720 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L8
SYMATTR Value {L_sec_lkg}
SYMBOL ind 656 704 R0
SYMATTR InstName L9
SYMATTR Value {L_sec}
SYMBOL cap 656 976 R0
SYMATTR InstName C1
SYMATTR Value {Cr_sec}
SYMBOL voltage 720 1280 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {mu_r}
SYMBOL voltage 992 1280 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {I_sat_sec}
SYMBOL voltage 1296 1280 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {I_sat_pri}
SYMBOL bi -992 816 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B2
SYMATTR Value I=I(V_I_mag_sec)*{(Ns/Np)**2}
SYMBOL voltage -880 720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_I_mag_pri
SYMATTR Value 0
SYMBOL res 608 1280 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res 880 1280 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res 1184 1280 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL ind 32 1760 R0
SYMATTR InstName L1
SYMATTR Value {Np*Np*Al}
SYMBOL ind 208 1760 R0
SYMATTR InstName L2
SYMATTR Value {Ns*Ns*Al}
SYMBOL res 544 1856 R0
SYMATTR InstName Rl1
SYMATTR Value {Rl}
SYMBOL ind 304 1744 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value {L_sec_lkg}
SYMBOL ind 544 1728 R0
SYMATTR InstName L4
SYMATTR Value {L_sec}
SYMBOL cap 544 2000 R0
SYMATTR InstName C2
SYMATTR Value {Cr_sec}
SYMBOL current -416 1872 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 24 -28 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value ""
SYMATTR Value2 AC 1
SYMBOL ind -96 1744 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value {0.02*Np*Np*Al}
SYMBOL res -112 1712 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2m
TEXT -8 432 Left 2 !.tran 0 5m 4m
TEXT 1000 656 Left 2 !.param Vin=48, Fsw=31.45k, Rl=2m\n.param L_sec_lkg=0.5u, L_sec=2u, Cr_sec=10u
TEXT 1904 880 Left 2 !;step dec param Rl 1m 100m 5\n;step dec param L_sec 0.1u 1u 5\n;step dec param Al 1u 20u 4\n;step param Fsw 4.0k 5.0k 100
TEXT -8 464 Left 2 ;.ac dec 1k 1k 100k
TEXT -1008 448 Left 2 ;I mag primary
TEXT 200 640 Left 2 !K2 L6 L7 0.99
TEXT 976 592 Left 2 ;want to operate just above resonance for ZVS
TEXT -88 560 Left 2 !.ic I(L6)=0\n.ic I(L7)=0
TEXT 992 744 Left 2 !.param Np=15, Ns=1\n.param  Al=2u, l_eff=0.2, A_eff=0.001, B_sat=0.3\n.param mu_r={Al*l_eff/(A_eff*4*pi*10**(-7))}\n.param I_sat_sec={B_sat*A_eff/(Ns*Al)}\n.param I_sat_pri={I_sat_sec*(Ns/Np)**2}
TEXT 88 1664 Left 2 !K1 L1 L2 0.99
